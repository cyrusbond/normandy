

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>preference-rollout: Permanently Change a Preference &mdash; Normandy 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="preference-rollback: Undo a preference rollback" href="preference-rollback.html" />
    <link rel="prev" title="preference-experiment: Temporarily Change a Preference" href="preference-experiment.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Normandy
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../filters.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peer_approval.html">Peer Approval</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Actions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="show-heartbeat.html">show-heartbeat: Show Heartbeat Prompt</a></li>
<li class="toctree-l3"><a class="reference internal" href="preference-experiment.html">preference-experiment: Temporarily Change a Preference</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">preference-rollout: Permanently Change a Preference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#telemetry-annotation">Telemetry Annotation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graduation">Graduation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arguments">Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="preference-rollback.html">preference-rollback: Undo a preference rollback</a></li>
<li class="toctree-l3"><a class="reference internal" href="opt-out-study.html">opt-out-study: Install a Study Add-on Without Prompting</a></li>
<li class="toctree-l3"><a class="reference internal" href="console-log.html">console-log: Log to the Console</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../end_user_interaction.html">End User Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html">API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qa/index.html">QA Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">Operations Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Normandy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Documentation</a> &raquo;</li>
        
          <li><a href="index.html">Actions</a> &raquo;</li>
        
      <li>preference-rollout: Permanently Change a Preference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user/actions/preference-rollout.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preference-rollout-permanently-change-a-preference">
<span id="preference-rollout"></span><h1>preference-rollout: Permanently Change a Preference<a class="headerlink" href="#preference-rollout-permanently-change-a-preference" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">preference-rollout</span></code> action permanently changes a preference in order
to deploy a proven feature to most or all users of Firefox.</p>
<p>Users who match <code class="docutils literal notranslate"><span class="pre">preference-rollout</span></code> have values changed to match the
configuration of the recipe. While the change is active, <a class="reference external" href="https://wiki.mozilla.org/Telemetry">Telemetry</a> pings are
annotated to note that the rollout is changing a value to a non-default
value. This allows us to measure the effect the preference change has on
existing Telemetry metrics.</p>
<p>Preference rollout works by changing the value of the preferences on the
default preference branch. Since changes to the default branch are not
persistent, this process must be repeated every time Firefox starts. This
process continues until a rollout is <a class="reference internal" href="preference-rollback.html#preference-rollback"><span class="std std-ref">rolled back</span></a>
or until it <a class="reference internal" href="#preference-rollout-graduation"><span class="std std-ref">graduates</span></a>.</p>
<p>Rollouts do not support branching, and are intended to be permanent. If there
is a mistake, a rollback can be undone with a <a class="reference internal" href="preference-rollback.html#preference-rollback"><span class="std std-ref">preference-rollback
action</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Users may be enrolled in multiple preference rollouts at the same time.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Preference experiments are designed to be permanent. They are not
appropriate for temporary changes.</p>
</div>
<div class="section" id="telemetry-annotation">
<h2>Telemetry Annotation<a class="headerlink" href="#telemetry-annotation" title="Permalink to this headline">¶</a></h2>
<p>While an experiment is running, the <a class="reference external" href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/index.html">Telemetry Environment</a> contains a list
of “experiment” IDs. This field is also used to mark other non-default
changes, such as rollouts. The Telemetry environment is sent along with the
<a class="reference external" href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/main-ping.html">main ping</a>, among others.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;environment&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;experiments&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;&lt;rollout id&gt;&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;branch&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;branch&gt;&quot;</span> <span class="p">},</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="graduation">
<span id="preference-rollout-graduation"></span><h2>Graduation<a class="headerlink" href="#graduation" title="Permalink to this headline">¶</a></h2>
<p>Rollouts expect that eventually the value of the preference built in to
Firefox will change to match the value of the rollout. This generally happens
when Firefox updates to a new version that has the preferences updated. When
this happens, the preference rollout <strong>graduates</strong>. Once a rollout graduates,
it stops setting the value of the preference at startup. If the default value
then changes again, Normandy will not change it back to the rollout value.</p>
</div>
<div class="section" id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>Slug</dt><dd><p>A unique identifier for this rollout. This is used for server and
telemetry identification of the rollout.</p>
</dd>
<dt>Preferences</dt><dd><p>A list of preferences to change, each with the following arguments:</p>
<dl class="simple">
<dt>Name</dt><dd><p>The full dotted-path of the preference to modify.</p>
</dd>
<dt>Type</dt><dd><p>The type of the preference to modify. If this doesn’t match the type on
the client, the rollout will not apply to anyone.</p>
</dd>
<dt>Value</dt><dd><p>Value to set the preference to for users that are assigned to this
branch.</p>
</dd>
</dl>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="preference-rollback.html" class="btn btn-neutral float-right" title="preference-rollback: Undo a preference rollback" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preference-experiment.html" class="btn btn-neutral float-left" title="preference-experiment: Temporarily Change a Preference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Mozilla Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>